<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosine-Sine Extraction</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="icon" type="image/svg+xml" href="./assets/integral.svg">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"
        integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"
        integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./assets/css/integral.css">

    <script defer src="https://cloud.umami.is/script.js"
        data-website-id="bfe63826-fbe6-4559-9060-8c4404b1e44d"></script>
</head>

<body>
    <div class="main-container">
        <div class="header">
            <h1>Cosine-Sine Extraction</h1>
            <p>This demonstrates how integration can extract non-shifted <span class="cosine-component">cosine</span>
                and <span class="sine-component">sine</span> waves from a
                <span class="phase-shifted">composite signal</span> containing multiple frequencies.
                The filled areas represent the integration of the product over one complete period,
                with horizontal lines showing the extracted coefficient values.
            </p>
            <p><strong>Integration:</strong>
                <span class="cosine-component" id="fourier-formula-cosine"></span>,
                <span class="sine-component" id="fourier-formula-sine"></span>
            </p>
        </div>

        <div class="charts-section">
            <div class="charts-grid">
                <div class="chart-item">
                    <h2 id="phaseShiftedCosineTitle">cos(t + Φ)</h2>
                    <div class="chart-container">
                        <canvas id="phaseShiftedCosineChart"></canvas>
                    </div>
                </div>
                <div class="complex-chart-item">
                    <h2>Frequency Components</h2>
                    <p style="font-size: 0.8em; margin: 0 0 15px 0; color: #666;">
                        Drag the slider to discover frequency components
                    </p>
                    <div class="formula-container"
                        style="display: flex; align-items: center; justify-content: center; height: 100%; padding: 20px; background: #f9f9f9; border-radius: 8px;">
                        <div id="dynamicFormula" style="font-size: 1.2em; text-align: center; line-height: 1.5;"></div>
                    </div>
                </div>
                <div class="chart-item">
                    <h2 id="nonPhaseShiftedCosineTitle">∫cos(t + Φ)cos(ωt)dt</h2>
                    <div class="chart-container">
                        <canvas id="nonPhaseShiftedCosineChart"></canvas>
                    </div>
                </div>
                <div class="chart-item">
                    <h2 id="sineWaveTitle">∫cos(t + Φ)sin(ωt)dt</h2>
                    <div class="chart-container">
                        <canvas id="sineWaveChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div style="margin-bottom: 10px;">
                <label for="angularFrequencySlider">Angular Frequency (ω): </label>
                <input type="range" id="angularFrequencySlider" min="0.5" max="3" step="0.1" value="1">
                <span id="angularFrequencyValue">1.0</span>
                <span style="font-size: 0.8em; margin-left: 10px; color: #666;">← Drag to change integration
                    frequency</span>
            </div>
        </div>

        <!-- GitHub link in bottom right corner -->
        <a href="https://github.com/roomrys/sigsys" class="github-link" target="_blank" rel="noopener noreferrer">
            <img src="./assets/github.svg" alt="View on GitHub" class="github-icon">
        </a>
    </div>

    <!-- JavaScript files in dependency order -->
    <script type="module" src="./assets/js/main.js"></script>

    <!-- Render math formulas in description -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Wait for KaTeX to load
            function renderDescriptionMath() {
                if (typeof katex !== 'undefined') {
                    try {
                        const cosineFormula = document.getElementById('fourier-formula-cosine');
                        const sineFormula = document.getElementById('fourier-formula-sine');

                        if (cosineFormula) {
                            katex.render('\\frac{2}{T}\\int f(t)\\cos(\\omega t)dt = a_\\omega', cosineFormula, {
                                throwOnError: false,
                                displayMode: false
                            });
                        }

                        if (sineFormula) {
                            katex.render('\\frac{2}{T}\\int f(t)\\sin(\\omega t)dt = b_\\omega', sineFormula, {
                                throwOnError: false,
                                displayMode: false
                            });
                        }
                    } catch (e) {
                        console.log('KaTeX rendering failed, using fallback');
                    }
                } else {
                    // Retry after a short delay if KaTeX hasn't loaded yet
                    setTimeout(renderDescriptionMath, 100);
                }
            }

            renderDescriptionMath();
        });
    </script>
</body>

</html>